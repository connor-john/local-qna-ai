# Introduction
The provided code repository is an AI-powered question-answering (QnA) system that allows users to extract relevant information from a local code repository and query it using natural language. The project utilizes the Langchain library for text processing and retrieval, OpenAI for language modeling, and Chroma for vector storage.

The core functionality of the system involves extracting relevant code files from a local directory, splitting the text into chunks, and storing them in a vector database. Users can then interact with the QnA bot by asking questions about the code repository, and the bot will retrieve the most relevant information to provide an answer.

# Codebase Overview
The codebase consists of the following main components:

1. `extract_repo.py`: This module is responsible for walking through a local directory, identifying relevant code files, and converting them into a single text file for further processing. It utilizes various filtering criteria to exclude unnecessary files and directories.

2. `qna.py`: This module defines the `AskBot` class, which encapsulates the core functionality of the QnA system. It loads the text file generated by `extract_repo.py`, splits the text into chunks, and stores them in a Chroma vector database. It also provides a `query` method for retrieving answers based on user queries.

3. `run.py`: This module serves as the entry point of the application. It takes a local repository directory as input, extracts the relevant code files, initializes the `AskBot` instance, and provides an interactive command-line interface for users to ask questions about the code repository.

The project utilizes the Poetry dependency management tool to handle package dependencies and virtual environment setup.

# Development Environment Setup
To set up the development environment for this project, follow these steps:

1. Install Poetry by following the official installation guide: https://python-poetry.org/docs/#installation

2. Clone the project repository from the version control system (e.g., Git).

3. Navigate to the project directory in your terminal.

4. Run `poetry install` to install the project dependencies and create a virtual environment.

5. Activate the virtual environment by running `poetry shell`.

6. Set up the required environment variables, such as API keys for OpenAI, by creating a `.env` file in the project root and adding the necessary variables.

# Code Repository Structure
The code repository has the following structure:

```
ai-coder/
├── ai_qna/
│   ├── __init__.py
│   ├── extract_repo.py
│   ├── qna.py
│   └── run.py
├── pyproject.toml
└── README.md
```

- `ai_qna/`: This directory contains the main Python modules of the project.
  - `extract_repo.py`: Module for extracting relevant code files from a local directory.
  - `qna.py`: Module defining the `AskBot` class for the QnA system.
  - `run.py`: Entry point of the application.
- `pyproject.toml`: The Poetry configuration file specifying project dependencies and metadata.
- `README.md`: The project's readme file providing an overview and instructions.

# Key Points of Complexity
1. File extraction and filtering:
   - The `extract_repo.py` module employs various filtering criteria to identify relevant code files and exclude unnecessary files and directories.
   - It checks for specific file types (e.g., .ts, .tsx, .prisma, .py) and key project files (e.g., package.json, pyproject.toml).
   - It excludes certain directories (e.g., docs, examples, tests) and specific file types (e.g., hubconf.py, setup.py) to focus on the core codebase.
   - It also checks for sufficient content in the files to avoid including empty or minimal files.

2. Text splitting and vector storage:
   - The `qna.py` module uses the `RecursiveCharacterTextSplitter` from Langchain to split the text into chunks of a specified size and overlap.
   - The chunks are then stored in a Chroma vector database using OpenAI embeddings for efficient retrieval.

3. Retrieval and question-answering:
   - The `AskBot` class in `qna.py` utilizes the `RetrievalQA` chain from Langchain to retrieve relevant chunks based on user queries.
   - It employs the "stuff" chain type, which combines the retrieved chunks and passes them to the OpenAI language model for generating answers.

# Installation and Setup
To install and set up the project, follow these steps:

1. Ensure that Python 3.9 or later is installed on your system.

2. Clone the project repository from the version control system (e.g., Git).

3. Navigate to the project directory in your terminal.

4. Install Poetry by following the official installation guide: https://python-poetry.org/docs/#installation

5. Run `poetry install` to install the project dependencies and create a virtual environment.

6. Set up the required environment variables, such as API keys for OpenAI, by creating a `.env` file in the project root and adding the necessary variables.

# Getting Started
To quickly start using the QnA system, follow these steps:

1. Ensure that the project is installed and set up as described in the "Installation and Setup" section.

2. Prepare a local code repository that you want to query using the QnA system.

3. Open a terminal and navigate to the project directory.

4. Activate the virtual environment by running `poetry shell`.

5. Run the following command, replacing `<local repository directory>` with the path to your local code repository:
   ```
   python ai_qna/run.py <local repository directory>
   ```

6. The QnA system will extract the relevant code files from the specified directory and initialize the `AskBot` instance.

7. You will be prompted to enter your questions about the code repository. Type your question and press Enter.

8. The QnA system will retrieve the most relevant information and provide an answer to your question.

9. To exit the QnA system, type "EXIT" (case-insensitive) and press Enter.

That's it! You can now start querying your code repository using natural language and receive relevant answers from the QnA system.